sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/library","sap/ui/unified/library","sap/ui/comp/smartvariants/PersonalizableInfo","sap/m/MessageToast","sap/ui/core/BusyIndicat+
or"],function(e,t,a,r,i,n,s,o,l){"use strict";var d=n.CalendarDayType,c=i.ValueState;return e.extend("ui5demodeploy.controller.View1",{onInit:function(){window.view1=this;this.oExpandedLabel=this.getView().byId("expandedLabel");this.oSnappedLabel=this.ge+
tView().byId("snappedLabel");this.oSmartVariantManagement=this.byId("svm");this.oFilterBar=this.byId("filterbar");var e=new s({type:"filterBar",keyName:"persistencyKey",dataSource:"",control:this.oFilterBar});this.oSmartVariantManagement.addPersonalizabl+
eControl(e);this.oSmartVariantManagement.initialise(function(){},this.oFilterBar)},rowSelectionChange:function(e){var t=this.byId("salesTable").getSelectedIndices();this.sPath=e.getParameters().rowContext.sPath;if(t.length!=0){this.byId("rePricingLink").+
setEnabled(true);this.byId("rejectAllLink").setEnabled(true)}else{this.byId("rePricingLink").setEnabled(false);this.byId("rejectAllLink").setEnabled(false)}},onPressPricing:function(){this.pricingDatePicker=new sap.m.DatePicker({});var e=this;var a=this.+
sPath;var r=window.ui5demodeploy.getView().getModel("salesList").getProperty(a+"/SalesOrderNumber");var i=this.getView().getModel();t.confirm(new sap.m.VBox({items:[new sap.m.Text({text:"Prising Date: "}).addStyleClass(""),this.pricingDatePicker]}),{titl+
e:"Re-Prising",actions:["Re-Prising","Cancel"],onClose:function(t){if(t=="Re-Prising"){var a=e.pricingDatePicker.getDateValue();if(a==null){return}l.show();a.setHours(a.getHours()+9);i.callFunction("/rePricing",{method:"POST",urlParameters:{SalesOrderNum+
ber:r,pricingdate:a},success:n,error:s});function n(e,t){var a=JSON.stringify(t.headers).split('message\\":\\"')[1];var r=a.split('\\",\\"')[0];var i=r.replaceAll("\\\\","\\");var n=decodeURIComponent(JSON.parse('"'+i+'"'));o.show(n,{duration:5e3});l.hid+
e()}function s(e){l.hide()}}}})},onPressRejectAll:function(){this.rejectDatePicker=new sap.m.DatePicker({});var e=new sap.ui.model.json.JSONModel;e.setData({values:window.ui5demodeploy.getView().getModel("rejectReason").oData});var a=this.getView().getMo+
del();sap.ui.getCore().setModel(e);this.recjectCombo=new sap.m.ComboBox({width:"143%"});this.recjectCombo.bindProperty("tooltip","/tooltip");this.recjectCombo.setModel(e);var r=new sap.ui.core.ListItem;r.bindProperty("key","Status");r.bindProperty("text"+
,"comboText");this.recjectCombo.bindItems("/values",r);var i=this;var n=this.sPath;var s=window.ui5demodeploy.getView().getModel("salesList").getProperty(n+"/SalesOrderNumber");var d;t.confirm(new sap.m.VBox({items:[new sap.m.Text({text:"Prising Date: "}+
).addStyleClass(""),this.rejectDatePicker,new sap.m.Text({text:"Reason for Rejection: "}).addStyleClass(""),this.recjectCombo]}),{title:"Reject All",actions:["Reject All","Cancel"],onClose:function(e){if(e=="Reject All"){d=window.view1.recjectCombo.getSe+
lectedKey();var t=i.rejectDatePicker.getDateValue();if(t==null||d==""){return}l.show();t.setHours(t.getHours()+9);a.callFunction("/rejectAll",{method:"POST",urlParameters:{SalesOrderNumber:s,pricingdate:t,rejectreason:d},success:r,error:n});function r(e,+
t){var a=JSON.stringify(t.headers).split('message\\":\\"')[1];var r=a.split('\\",\\"')[0];var i=r.replaceAll("\\\\","\\");var n=decodeURIComponent(JSON.parse('"'+i+'"'));o.show(n,{duration:5e3});l.hide()}function n(e){l.hide()}}}})},liveSearch:function(e+
){this.oExpandedLabel.setText(this.getFormattedSummaryTextExpanded());this.oSnappedLabel.setText(this.getFormattedSummaryText());this.onSearch()},handleChange:function(e){var t=e.getSource(),a=e.getParameter("value"),r=e.getParameter("valid");this._iEven+
t++;if(r){t.setValueState(c.None)}else{t.setValueState(c.Error)}},tokenUpdate:function(e){this.oExpandedLabel.setText(this.getFormattedSummaryTextExpanded());this.oSnappedLabel.setText(this.getFormattedSummaryText());var t=this.byId("salesTable");t.setSh+
owOverlay(true)},onFilterChange:function(e){this.oExpandedLabel.setText(this.getFormattedSummaryTextExpanded());this.oSnappedLabel.setText(this.getFormattedSummaryText());var t=this.byId("salesTable");t.setShowOverlay(true)},onSearch:function(){var e=thi+
s.aFilter();var t=this.byId("salesTable");var a=t.getBinding();a.filter(e);t.setShowOverlay(false)},dateFormat:function(e){if(e==null){return""}var t=e;return t.getFullYear()+". "+t.getMonth().toString().padStart(2,"0")+". "+t.getDate().toString().padSta+
rt(2,"0")+". "},getFormattedSummaryText:function(){var e=this.aFilter();var t=this.aCategory();if(e.length===0){return"No filters active"}if(e.length===1){return e.length+" filter active: "+t.join(", ")}return e.length+" filters active: "+t.join(", ")},g+
etFormattedSummaryTextExpanded:function(){var e=this.aFilter();if(e.length===0){return"No filters active"}var t=e.length+" filters active",a=this.hiddenFilter();if(e.length===1){t=e.length+" filter active"}if(a&&a.length>0){t+=" ("+a.length+" hidden)"}re+
turn t},aFilter:function(){var e=this.byId("filterbar");var t=e.getFilterItems();var i=[];for(var n of t){var s=e.determineControlByFilterItem(n);var o;if(n.mProperties.name=="Search"){var l=this.byId("oSearch").getValue();if(l){i.push(new a({filters:[ne+
w a("OrderType",r.Contains,l),new a("SalesOrderNumber",r.Contains,l),new a("SalesOrganization",r.Contains,l),new a("DistChannel",r.Contains,l),new a("Division",r.Contains,l),new a("SalesOffice",r.Contains,l),new a("SalesGroup",r.Contains,l),new a("Reject+
ionStatus",r.Contains,l),new a("StatusOfStatic",r.Contains,l),new a("DeliverStatus",r.Contains,l),new a("CreatedBy",r.Contains,l),new a("CustomerName",r.Contains,l),new a("OrderType",r.Contains,l)],and:false}))}}else{if(s.getFilter().aFilters){var d=[];f+
or(var c of s.getFilter().aFilters){if(c.oValue2==undefined){d.push(new a(c.sPath,c.sOperator,c.oValue1))}else{d.push(new a(c.sPath,c.sOperator,c.oValue1,c.oValue2))}}i.push(new a({filters:d,and:false}))}}}return i},hiddenFilter:function(){var e=this.byI+
d("filterbar");var t=[];return t},aCategory:function(){var e=this.byId("filterbar");var t=[];var a=e.getFilterItems();for(var r of a){var i=e.determineControlByFilterItem(r);if(r.mProperties.name=="Search"){var n=this.byId("oSearch").getValue();if(n){t.p+
ush(r.getName())}}else{if(i.getFilter().aFilters){t.push(r.getName())}}}return t}})});                                                                                                                                                                         